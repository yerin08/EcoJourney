# 🌍 탄소 발자국 계산기

일상 활동의 탄소 배출량을 계산하고, AI 기반 맞춤형 코칭을 받을 수 있는 웹 애플리케이션입니다.

## ✨ 주요 기능

- 📊 **탄소 배출량 계산**: 교통, 의류, 식품, 쓰레기, 전기, 물 등 다양한 카테고리별 탄소 배출량 계산
- 🤖 **AI 코칭**: Google Gemini API를 활용한 맞춤형 탄소 저감 제안
- 🌍 **지구 아바타**: 실시간으로 지구의 건강 상태를 확인
- 🏆 **배지 시스템**: 다양한 활동을 통해 배지 획득
- 📈 **대시보드**: 카테고리별 배출량 시각화 및 평균 비교

## 🏗️ 프로젝트 구조

```
codegreen_Demo/
├── ecojourney/                 # Reflex Full-stack 앱
│   ├── __init__.py
│   ├── ecojourney.py          # 메인 앱 파일 (라우팅 정의)
│   ├── state.py               # State 관리 (AppState 클래스)
│   ├── pages/                 # 페이지 컴포넌트
│   │   ├── __init__.py
│   │   ├── home.py           # 홈 페이지
│   │   ├── intro.py          # 인트로 페이지
│   │   ├── transportation.py # 교통 입력 페이지
│   │   ├── food.py           # 식품 입력 페이지
│   │   ├── clothing.py       # 의류 입력 페이지
│   │   ├── electricity.py    # 전기 입력 페이지
│   │   ├── water.py          # 물 입력 페이지
│   │   ├── waste.py          # 쓰레기 입력 페이지
│   │   └── report.py         # 리포트 페이지
│   ├── service/              # 서비스 로직
│   │   ├── __init__.py
│   │   ├── carbon_calculator.py  # 탄소 계산 로직
│   │   ├── ai_coach.py           # AI 코칭 로직
│   │   ├── average_data.py       # 평균 데이터
│   │   └── models.py             # 데이터 모델
│   ├── REFLEX_SETUP.md        # Reflex 설정 가이드
│   └── requirements.txt
├── rxconfig.py                # Reflex 설정 파일 (프로젝트 루트)
├── QUICKSTART.md              # 빠른 시작 가이드
└── README.md                  # 프로젝트 문서
```

## 🚀 빠른 시작

자세한 설치 및 실행 방법은 [QUICKSTART.md](./QUICKSTART.md)를 참고하세요.

### 1. 환경 설정

```bash
# 가상환경 생성 및 활성화
python -m venv .venv
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # macOS/Linux

# 의존성 설치
pip install -r ecojourney/requirements.txt
```

### 2. 환경 변수 설정

프로젝트 루트에 `.env` 파일을 생성하고 Google Gemini API 키를 추가하세요:

```
GEMINI_API_KEY=your_gemini_api_key_here
```

> **참고**: Gemini API 키는 [Google AI Studio](https://aistudio.google.com/app/apikey)에서 무료로 발급받을 수 있습니다.

### 3. 서버 실행

**Reflex 앱 실행 (프론트엔드 + 백엔드 통합)**

Reflex는 프론트엔드와 백엔드를 하나로 통합한 Full-stack 프레임워크입니다.
별도의 백엔드 서버를 실행할 필요가 없습니다.

```bash
cd ecojourney
reflex run
```

브라우저에서 `http://localhost:3000`으로 접속하세요.

> **참고**: Reflex는 Full-stack 프레임워크로, 프론트엔드와 백엔드가 하나로 통합되어 있습니다. 별도의 백엔드 서버를 실행할 필요가 없습니다. 모든 로직은 `service/` 폴더의 서비스 함수로 처리됩니다.

## 📋 지원 카테고리

- **교통**: 자동차, 버스, 지하철, 걷기, 자전거
- **의류**: 티셔츠, 청바지, 신발 (새제품/빈티지)
- **식품**: 소고기, 돼지고기, 양파, 파, 마늘
- **쓰레기**: 일반, 플라스틱, 종이, 유리, 캔
- **전기**: 냉방기, 난방기
- **물**: 샤워, 설거지, 세탁

## 📊 카테고리별 계산 방법

### 1. 교통 🚗

**입력 단위**: 분 또는 km

**계산 방식**:
- **분 단위 입력**: 시간을 거리로 변환 후 배출계수 적용
  - 자동차: 30 km/h (도심 평균) × 시간 → km 변환
  - 버스: 25 km/h × 시간 → km 변환
  - 지하철: 30 km/h × 시간 → km 변환
  - 걷기/자전거: 0 kgCO₂e (탄소 배출 없음)

**배출계수** (kgCO₂e/km):
- 자동차: 0.171
- 버스: 0.089
- 지하철: 0.014
- 걷기/자전거: 0.0

**예시**: 자동차로 30분 이동 = 15km × 0.171 = **2.565 kgCO₂e**

---

### 2. 의류 👕

**입력 단위**: 개

**계산 방식**:
- 개수 × 배출계수 (새제품/빈티지 구분)
- 빈티지 의류는 새제품의 10% 배출량

**배출계수** (kgCO₂e/개):
- 티셔츠 (새제품): 2.0 | (빈티지): 0.2
- 청바지 (새제품): 33.4 | (빈티지): 3.34
- 신발 (새제품): 13.6 | (빈티지): 1.36

**예시**: 새 청바지 1개 구매 = 1 × 33.4 = **33.4 kgCO₂e**

---

### 3. 식품 🍖

**입력 단위**: g 또는 1회 식사

**계산 방식**:
- g 단위: g → kg 변환 후 배출계수 적용
- 1회 식사: 기준량 적용 (소고기 200g, 돼지고기 150g)

**배출계수** (kgCO₂e/kg):
- 소고기: 27.0
- 돼지고기: 12.1
- 양파: 0.5
- 파: 0.4
- 마늘: 0.6

**예시**: 소고기 1회 식사 = 0.2kg × 27.0 = **5.4 kgCO₂e**

---

### 4. 쓰레기 🗑️

**입력 단위**: kg 또는 개

**계산 방식**:
- kg 단위: 직접 배출계수 적용
- 개 단위: 개수 → 무게 변환 후 배출계수 적용
  - 캔: 0.015 kg/개
  - 병: 0.4 kg/개

**배출계수** (kgCO₂e/kg):
- 일반 쓰레기: 0.5 (매립)
- 플라스틱: 2.5
- 종이: 0.3
- 유리: 0.2
- 캔: 1.5

**예시**: 플라스틱 1kg = 1 × 2.5 = **2.5 kgCO₂e**

---

### 5. 전기 ⚡

**입력 단위**: 시간

**계산 방식**:
- 시간 × 기기별 소비전력 → kWh 변환 후 배출계수 적용
- 냉방기: 2.0 kW
- 난방기: 1.5 kW

**배출계수**: 0.424 kgCO₂e/kWh (한국 전력 배출계수)

**예시**: 에어컨 2시간 사용 = 4 kWh × 0.424 = **1.696 kgCO₂e**

---

### 6. 물 💧

**입력 단위**: 회 또는 분 (샤워만)

**계산 방식**:
- 회 단위: 횟수 × 평균 사용량 → L 변환 후 배출계수 적용
  - 샤워: 70 L/회
  - 설거지: 15 L/회
  - 세탁: 60 L/회
- 분 단위 (샤워): 분 × 10 L/분 → L 변환

**배출계수**: 0.0003 kgCO₂e/L (상수도 처리)

**예시**: 샤워 1회 = 70 L × 0.0003 = **0.021 kgCO₂e**

---

## 🤖 AI 분석 기준

AI 코칭은 Google Gemini API를 사용하여 사용자의 탄소 배출 패턴을 분석하고 맞춤형 제안을 제공합니다.

### 분석 데이터

1. **총 탄소 배출량**: 오늘 하루 총 배출량 (kgCO₂e)
2. **카테고리별 배출량**: 각 카테고리(교통, 식품, 전기 등)별 배출량
3. **최근 활동 내역**: 최근 10개 활동의 상세 정보
4. **한국인 평균 비교**: 한국인 평균 일일 배출량과 비교

### 한국인 평균 일일 배출량 (kgCO₂e)

- **교통**: 3.5
- **식품**: 2.8
- **전기**: 2.2
- **물**: 0.3
- **의류**: 0.5
- **쓰레기**: 0.7
- **전체 평균**: 약 **10.0 kgCO₂e/일**

### AI 분석 프로세스

1. **패턴 분석**: 사용자의 배출 패턴을 2-3문장으로 요약
2. **구체적 제안**: 실천 가능한 탄소 저감 제안 3가지 제시
   - 각 제안에 "소나무 X그루를 심는 효과" 같은 감성적 비유 포함
3. **대안 행동**: 실제 사용한 활동에 대한 구체적 대안 제시
   - 예: 자동차 이용 → 대중교통 이용 (50% 감소)
   - 예: 육류 섭취 → 채식 위주 식단 (70% 감소)
4. **격려 메시지**: 감성적이고 동기부여가 되는 메시지 제공

### AI 분석 예시

**입력 데이터**:
- 총 배출량: 12.5 kgCO₂e
- 교통: 자동차 30분 (2.565 kgCO₂e)
- 식품: 소고기 1회 식사 (5.4 kgCO₂e)

**AI 분석 결과**:
- **분석**: 평균보다 약 25% 높은 배출량입니다. 특히 교통과 식품 분야에서 개선의 여지가 있습니다.
- **제안1**: 대중교통 이용으로 교통 배출량을 50% 줄일 수 있어요 (소나무 3그루 심기 효과)
- **제안2**: 채식 위주 식단으로 식품 배출량을 70% 감소시킬 수 있어요 (소나무 5그루 심기 효과)
- **제안3**: 물과 전기 사용을 10% 줄이면 추가 감소 효과가 있어요
- **격려 메시지**: 작은 변화가 큰 차이를 만듭니다! 함께 지구를 지켜요 🌱

---

## 🛠️ 기술 스택

### Full-stack 프레임워크
- **Reflex 0.8.20**: Python 기반 React 프레임워크 (프론트엔드 + 백엔드 통합)
  - 프론트엔드: React 기반 UI
  - 백엔드: Python 서비스 로직 (FastAPI 스타일)

### 외부 API
- **Google Gemini API**: AI 코칭 기능

### 주요 특징
- **Full-stack 통합**: 별도의 백엔드 서버 없이 하나의 앱으로 실행
- **State 관리**: `rx.State` 클래스를 통한 전역 상태 관리
- **이벤트 핸들러**: `on_click`, `on_change` 등을 통한 인터랙티브 UI
- **페이지 라우팅**: `rx.redirect()`를 통한 페이지 네비게이션

## 📚 추가 문서

- **빠른 시작**: [QUICKSTART.md](./QUICKSTART.md)
- **Reflex 설정 가이드**: [ecojourney/REFLEX_SETUP.md](./ecojourney/REFLEX_SETUP.md)

## 🤝 기여하기

이슈나 개선 사항이 있으면 언제든지 제안해주세요!

## 📄 라이선스

이 프로젝트는 교육 및 개인 프로젝트 목적으로 제작되었습니다.

---

🌱 **작은 실천이 큰 변화를 만듭니다** 🌍
