# 🌍 EcoJourney - 지구를 살리는 행동, 학교의 자존심을 건 승부!

**"지구를 살리는 행동, 학교의 자존심을 건 승부!"**

EcoJourney는 사용자의 일상 행동 데이터를 기반으로 탄소 배출량을 계산·시각화하고,  
사용자의 입력 데이터를 기반으로 AI가 탄소 저감 방향을 제안하는 기능을 제공합니다.  
단과대 기반 **대항전·랭킹·챌린지**를 통해 환경 보호를 게임처럼 즐길 수 있도록 설계되었습니다.

## 🎯 문제 제기

- 환경 문제의 심각성은 인지하지만, 개인의 행동이 배출량에 미치는 영향은 체감하기 어려움
- 기존 환경 앱은 기록 위주로 구성되어 지속적인 사용 동기 부족
- 친환경 활동 보상이 현실적인 혜택(대학 생활 마일리지 등)으로 연결되지 않음


## 💡 개발 배경


### 대학생 맞춤형 게이미피케이션
소속감(단과대)과 경쟁 심리를 자극하는 '대항전'과 한림BeCome 마일리지 연동을 통해 대학생들이 능동적으로 참여하는 친환경 문화를 조성.

## ✨ 주요 기능

### A. 행동 기반 탄소 관리 및 AI 분석

- 📊 **탄소 배출량 계산**: 교통, 의류, 식품, 쓰레기, 전기, 물 등 다양한 카테고리별 탄소 배출량 계산
  - 사용자의 일일 행동(자동차 이동 거리, 일회용 컵 개수, 에어컨 사용 시간 등) 입력
  - 외부 탄소 계산 API를 연동하여 신뢰도 높은 배출량 계산
- 🏆 **배지 기능**: 다양한 활동을 통해 배지 획득
- 🤖 **AI 코칭**: Google Gemini API를 활용한 맞춤형 탄소 저감 제안
- 📈 **탄소 리포트 & AI 대안 추천**:
  - 시각화: 라인/파이 차트를 통해 카테고리별 배출 기여도 및 평균 대비 증감량 분석
  - AI 컨설턴트: 사용자의 패턴을 분석하여 "대중교통 이용 시 탄소 OOkg 절감 가능" 등의 구체적 대안 제시 및 미래 예측

### B. 단과대 대항전 및 챌린지 (신규 추가 기능)

- 🔐 **로그인 및 사용자 구분**: 학번(ID/PK), 비밀번호, 소속 단과대를 필수로 입력받아 그룹화
- 🏆 **단과대 1:1 랭킹전 (Winner Takes All)**:
  - 랜덤 매칭: 매주 월요일, 다른 단과대 팀과 1:1 랜덤 매칭
  - 포인트 베팅: 대결 참가 시 보유 포인트를 베팅(참가비)
  - 승리 보상: 일주일간 팀원들의 총 획득 포인트가 높은 팀이 승리하며, 패배 팀의 베팅 포인트까지 획득 (승자 독식 구조)
- 🎯 **주간 챌린지 미션**: '환경 정책 페이지 열람', '7일 연속 리포트 작성' 등 미션 수행 시 보너스 포인트 지급

### C. 보상 시스템 (신규 추가 기능)

- 💰 **한림BeCome 마일리지 환산 (테스트 버전)**:
  - 앱에서 모은 포인트를 학교 공식 마일리지로 교환 신청 가능
  - 자동 처리 프로세스: 환산 신청 즉시 관리자 승인 처리 → 앱 내 포인트 차감 → "환산 완료" 팝업을 통해 사용자에게 즉각적인 보상 경험 제공

## 🏗️ 프로젝트 구조

```
codegreen_Demo/
├── ecojourney/                 # Reflex Full-stack 앱
│   ├── __init__.py
│   ├── ecojourney.py          # 메인 앱 파일 (라우팅 정의)
│   ├── state.py               # State 관리 (AppState 클래스)
│   ├── pages/                 # 페이지 컴포넌트
│   │   ├── __init__.py
│   │   ├── home.py           # 홈 페이지
│   │   ├── intro.py          # 인트로 페이지
│   │   ├── transportation.py # 교통 입력 페이지
│   │   ├── food.py           # 식품 입력 페이지
│   │   ├── clothing.py       # 의류 입력 페이지
│   │   ├── electricity.py    # 전기 입력 페이지
│   │   ├── water.py          # 물 입력 페이지
│   │   ├── waste.py          # 쓰레기 입력 페이지
│   │   └── report.py         # 리포트 페이지
│   ├── service/              # 서비스 로직
│   │   ├── __init__.py
│   │   ├── carbon_calculator.py  # 탄소 계산 로직
│   │   ├── ai_coach.py           # AI 코칭 로직
│   │   ├── average_data.py       # 평균 데이터
│   │   └── models.py             # 데이터 모델
│   ├── REFLEX_SETUP.md        # Reflex 설정 가이드
│   └── requirements.txt
├── rxconfig.py                # Reflex 설정 파일 (프로젝트 루트)
├── QUICKSTART.md              # 빠른 시작 가이드
└── README.md                  # 프로젝트 문서
```

## 🚀 빠른 시작

자세한 설치 및 실행 방법은 [QUICKSTART.md](./QUICKSTART.md)를 참고하세요.

### 1. 환경 설정

```bash
# 가상환경 생성 및 활성화
python -m venv .venv
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # macOS/Linux

# Python 의존성 설치
pip install -r ecojourney/requirements.txt

# Node.js 의존성 설치 (react-player 등)
npm install
```

### 2. 환경 변수 설정

프로젝트 루트에 `.env` 파일을 생성하고 Google Gemini API 키를 추가하세요:

```
GEMINI_API_KEY=your_gemini_api_key_here

# 탄소 배출량 계산 API (선택사항)
# API 키가 없어도 로컬 배출 계수로 계산됩니다
CLIMATIQ_API_KEY=your_climatiq_api_key_here
```

> **참고**: 
> - Gemini API 키는 [Google AI Studio](https://aistudio.google.com/app/apikey)에서 무료로 발급받을 수 있습니다.
> - Climatiq API 키는 [Climatiq](https://www.climatiq.io/)에서 발급받을 수 있습니다.
>   - 무료 티어 제공 (제한 있음)
>   - 교통, 전기, 식품 등 일상 생활 행동의 탄소 배출량을 정확하게 계산
>   - API 키가 없어도 기본 기능은 사용할 수 있지만, 로컬 배출 계수를 사용합니다.

### 3. 데이터베이스 초기화

모델을 정의했으므로 데이터베이스를 초기화하고 마이그레이션을 적용해야 합니다:

```bash
cd ecojourney

# 1. DB 초기화 (아직 안 했다면)
reflex db init

# 2. 변경 사항(작성한 모델) 감지 및 스크립트 생성
reflex db makemigrations --message "init models"

# 3. 실제 DB에 테이블 생성
reflex db migrate
```

> **참고**: 
> - 첫 실행 시에만 `reflex db init`을 실행하면 됩니다.
> - 모델을 수정한 후에는 `makemigrations`와 `migrate`만 실행하면 됩니다.
> - 데이터베이스 파일은 프로젝트 루트에 생성됩니다.

### 4. 서버 실행

**Reflex 앱 실행 (프론트엔드 + 백엔드 통합)**

Reflex는 프론트엔드와 백엔드를 하나로 통합한 Full-stack 프레임워크입니다.
별도의 백엔드 서버를 실행할 필요가 없습니다.

```bash
cd ecojourney
reflex run
```

브라우저에서 `http://localhost:3000`으로 접속하세요.

> **참고**: 데이터베이스를 초기화하지 않았다면 먼저 [데이터베이스 초기화](#3-데이터베이스-초기화) 단계를 완료하세요.

> **참고**: Reflex는 Full-stack 프레임워크로, 프론트엔드와 백엔드가 하나로 통합되어 있습니다. 별도의 백엔드 서버를 실행할 필요가 없습니다. 모든 로직은 `service/` 폴더의 서비스 함수로 처리됩니다.

## 📘 계산 기준 및 상세 문서
탄소 배출량 계산 방식, 배출계수, 단위 변환 규칙, 데이터 출처,  
AI 분석 기준 및 포인트 지급 로직은 별도 문서로 분리하여 관리합니다.

자세한 내용은 아래 문서를 참고하세요.
- [`docs/CALCULATION.md`](./docs/CALCULATION.md)

## 🛠️ 기술 스택

### Full-stack 프레임워크
- **Reflex 0.8.20**: Python 기반 React 프레임워크 (프론트엔드 + 백엔드 통합)
  - 프론트엔드: React 기반 UI
  - 백엔드: Python 서비스 로직 (FastAPI 스타일)

### 외부 API
- **Google Gemini API**: AI 코칭 기능

### 주요 특징
- **Full-stack 통합**: 별도의 백엔드 서버 없이 하나의 앱으로 실행
- **State 관리**: `rx.State` 클래스를 통한 전역 상태 관리
- **이벤트 핸들러**: `on_click`, `on_change` 등을 통한 인터랙티브 UI
- **페이지 라우팅**: `rx.redirect()`를 통한 페이지 네비게이션

## 🎯 차별점

| 비교 항목 | 기존 공공/지자체 앱<br/>(탄소중립포인트, 에코마일리지) | 기존 민간/글로벌 앱<br/>(AWorld, Forest, 챌린저스) | **EcoJourney** |
|---------|---------|---------|---------|
| **동기 부여** | 의무감/절약<br/>(공과금 절약, 포인트 적립) | 자기만족/습관<br/>(나무 심기, 인증샷 남기기) | 🔥 **승부욕/도박성(재미)**<br/>(포인트 베팅, 단과대 대항전 승리) |
| **시각화** | 수치 중심 (딱딱함)<br/>(그래프, 숫자 나열) | 세련된 UI (정적)<br/>(일러스트, 나무 성장) | ❤️ **감성적 인터랙션 (동적)**<br/>(나의 행동에 따라 아파하거나 웃는 지구 아바타) |
| **참여 방식** | 개인 플레이<br/>(나 혼자 에너지 절약) | 느슨한 커뮤니티<br/>(다른 사람 인증 구경하기) | 🤝 **팀 플레이 (Co-opetition)**<br/>(우리 단과대의 승리를 위해 친구 영입) |
| **보상 체계** | 느린 보상<br/>(몇 달 뒤 현금/포인트 지급) | 가상 보상<br/>(앱 내 레벨업, 뱃지) | 💰 **즉각적 현실 보상**<br/>(승자 독식 포인트 → 학교 마일리지 즉시 환전) |
| **분석 기능** | 단순 통계<br/>(지난달 대비 사용량 비교) | 기능 없음<br/>(단순 기록 저장) | 🤖 **AI 컨설턴트**<br/>(구체적 행동 제안 및 탄소 저감 시뮬레이션) |

## 📈 기대 효과

### 자발적 바이럴 마케팅
단과대 대항전 승리를 위해 학생들이 서로 앱 설치와 입력을 독려하며 자연스럽게 사용자 확대.

### 환경 데이터 구축
학번 기반의 실명 데이터를 통해 대학생들의 탄소 배출 패턴과 환경 의식 수준에 대한 신뢰도 높은 데이터베이스 확보.

### 행동 변화 유도
아바타의 변화와 AI의 구체적 조언, 그리고 7일 챌린지를 통해 일회성이 아닌 습관적인 친환경 라이프스타일 정착.

## 📚 추가 문서

- **빠른 시작**: [QUICKSTART.md](./QUICKSTART.md)
- **Reflex 설정 가이드**: [ecojourney/REFLEX_SETUP.md](./ecojourney/REFLEX_SETUP.md)

## 🤝 기여하기

이슈나 개선 사항이 있으면 언제든지 제안해주세요!

## 📄 라이선스

이 프로젝트는 교육 및 개인 프로젝트 목적으로 제작되었습니다.

---

🌱 **작은 실천이 큰 변화를 만듭니다** 🌍
