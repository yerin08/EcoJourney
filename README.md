# 🌍 EcoJourney - 지구를 살리는 행동, 학교의 자존심을 건 승부!

**"지구를 살리는 행동, 학교의 자존심을 건 승부!"**

EcoJourney는 사용자의 행동 기반 탄소 배출량을 분석하여 시각화로 변화시키고, AI 기반의 대안을 제시하는 플랫폼입니다. 더불어 단과대별 1:1 대항전과 학교 마일리지 환산 시스템을 도입하여 환경 보호 활동을 강력한 경쟁 게임이자 재테크 수단으로 확장했습니다.

## 🎯 문제 제기

### 환경 불감증과 행동의 괴리
환경 문제의 심각성은 인지하고 있으나, 나의 일상 행동이 정확히 얼마나 탄소를 배출하는지 알기 어렵고 체감되지 않음.

### 지속적 동기부여 부재
기존 환경 앱들은 단순 기록에 그쳐 사용자가 재미를 느끼지 못하고 금방 이탈함.

### 보상의 실효성 부족
환경 보호 활동에 대한 보상이 앱 내 만족으로만 끝나, 현실적인 이득(대학 생활 혜택 등)으로 연결되지 않음.

## 💡 개발 배경


### 대학생 맞춤형 게이미피케이션
소속감(단과대)과 경쟁 심리를 자극하는 '대항전'과 학교 공식 마일리지(BeCome) 연동을 통해 대학생들이 능동적으로 참여하는 친환경 문화를 조성.

## ✨ 주요 기능

### A. 행동 기반 탄소 관리 및 AI 분석

- 📊 **탄소 배출량 계산**: 교통, 의류, 식품, 쓰레기, 전기, 물 등 다양한 카테고리별 탄소 배출량 계산
  - 사용자의 일일 행동(자동차 이동 거리, 일회용 컵 개수, 에어컨 사용 시간 등) 입력
  - 외부 탄소 계산 오픈 API를 연동하여 정확한 배출량을 계산하고 DB에 저장
- 🏆 **배지 기능**: 다양한 활동을 통해 배지 획득
- 🤖 **AI 코칭**: Google Gemini API를 활용한 맞춤형 탄소 저감 제안
- 📈 **탄소 리포트 & AI 대안 추천**:
  - 시각화: 라인/파이 차트를 통해 카테고리별 배출 기여도 및 평균 대비 증감량 분석
  - AI 컨설턴트: 사용자의 패턴을 분석하여 "대중교통 이용 시 탄소 OOkg 절감 가능" 등의 구체적 대안 제시 및 미래 예측

### B. 단과대 대항전 및 챌린지 (신규 추가 기능)

- 🔐 **로그인 및 사용자 구분**: 학번(ID/PK), 비밀번호, 소속 단과대를 필수로 입력받아 그룹화
- 🏆 **단과대 1:1 랭킹전 (Winner Takes All)**:
  - 랜덤 매칭: 매주 월요일, 다른 단과대 팀과 1:1 랜덤 매칭
  - 포인트 베팅: 대결 참가 시 보유 포인트를 베팅(참가비)
  - 승리 보상: 일주일간 팀원들의 총 획득 포인트가 높은 팀이 승리하며, 패배 팀의 베팅 포인트까지 획득 (승자 독식 구조)
- 🎯 **주간 챌린지 미션**: '환경 정책 페이지 열람', '7일 연속 리포트 작성' 등 미션 수행 시 보너스 포인트 지급

### C. 보상 시스템 (신규 추가 기능)

- 💰 **BeCome 마일리지 환산 (테스트 버전)**:
  - 앱에서 모은 포인트를 학교 공식 마일리지로 교환 신청 가능
  - 자동 처리 프로세스: 환산 신청 즉시 관리자 승인 처리 → 앱 내 포인트 차감 → "환산 완료" 팝업을 통해 사용자에게 즉각적인 보상 경험 제공

## 🏗️ 프로젝트 구조

```
codegreen_Demo/
├── ecojourney/                 # Reflex Full-stack 앱
│   ├── __init__.py
│   ├── ecojourney.py          # 메인 앱 파일 (라우팅 정의)
│   ├── state.py               # State 관리 (AppState 클래스)
│   ├── pages/                 # 페이지 컴포넌트
│   │   ├── __init__.py
│   │   ├── home.py           # 홈 페이지
│   │   ├── intro.py          # 인트로 페이지
│   │   ├── transportation.py # 교통 입력 페이지
│   │   ├── food.py           # 식품 입력 페이지
│   │   ├── clothing.py       # 의류 입력 페이지
│   │   ├── electricity.py    # 전기 입력 페이지
│   │   ├── water.py          # 물 입력 페이지
│   │   ├── waste.py          # 쓰레기 입력 페이지
│   │   └── report.py         # 리포트 페이지
│   ├── service/              # 서비스 로직
│   │   ├── __init__.py
│   │   ├── carbon_calculator.py  # 탄소 계산 로직
│   │   ├── ai_coach.py           # AI 코칭 로직
│   │   ├── average_data.py       # 평균 데이터
│   │   └── models.py             # 데이터 모델
│   ├── REFLEX_SETUP.md        # Reflex 설정 가이드
│   └── requirements.txt
├── rxconfig.py                # Reflex 설정 파일 (프로젝트 루트)
├── QUICKSTART.md              # 빠른 시작 가이드
└── README.md                  # 프로젝트 문서
```

## 🚀 빠른 시작

자세한 설치 및 실행 방법은 [QUICKSTART.md](./QUICKSTART.md)를 참고하세요.

### 1. 환경 설정

```bash
# 가상환경 생성 및 활성화
python -m venv .venv
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # macOS/Linux

# Python 의존성 설치
pip install -r ecojourney/requirements.txt

# Node.js 의존성 설치 (react-player 등)
npm install
```

### 2. 환경 변수 설정

프로젝트 루트에 `.env` 파일을 생성하고 Google Gemini API 키를 추가하세요:

```
GEMINI_API_KEY=your_gemini_api_key_here

# 탄소 배출량 계산 API (선택사항)
# API 키가 없어도 로컬 배출 계수로 계산됩니다
CLIMATIQ_API_KEY=your_climatiq_api_key_here
```

> **참고**: 
> - Gemini API 키는 [Google AI Studio](https://aistudio.google.com/app/apikey)에서 무료로 발급받을 수 있습니다.
> - Climatiq API 키는 [Climatiq](https://www.climatiq.io/)에서 발급받을 수 있습니다.
>   - 무료 티어 제공 (제한 있음)
>   - 교통, 전기, 식품 등 일상 생활 행동의 탄소 배출량을 정확하게 계산
>   - API 키가 없어도 기본 기능은 사용할 수 있지만, 로컬 배출 계수를 사용합니다.

### 3. 데이터베이스 초기화

모델을 정의했으므로 데이터베이스를 초기화하고 마이그레이션을 적용해야 합니다:

```bash
cd ecojourney

# 1. DB 초기화 (아직 안 했다면)
reflex db init

# 2. 변경 사항(작성한 모델) 감지 및 스크립트 생성
reflex db makemigrations --message "init models"

# 3. 실제 DB에 테이블 생성
reflex db migrate
```

> **참고**: 
> - 첫 실행 시에만 `reflex db init`을 실행하면 됩니다.
> - 모델을 수정한 후에는 `makemigrations`와 `migrate`만 실행하면 됩니다.
> - 데이터베이스 파일은 프로젝트 루트에 생성됩니다.

### 4. 서버 실행

**Reflex 앱 실행 (프론트엔드 + 백엔드 통합)**

Reflex는 프론트엔드와 백엔드를 하나로 통합한 Full-stack 프레임워크입니다.
별도의 백엔드 서버를 실행할 필요가 없습니다.

```bash
cd ecojourney
reflex run
```

브라우저에서 `http://localhost:3000`으로 접속하세요.

> **참고**: 데이터베이스를 초기화하지 않았다면 먼저 [데이터베이스 초기화](#3-데이터베이스-초기화) 단계를 완료하세요.

> **참고**: Reflex는 Full-stack 프레임워크로, 프론트엔드와 백엔드가 하나로 통합되어 있습니다. 별도의 백엔드 서버를 실행할 필요가 없습니다. 모든 로직은 `service/` 폴더의 서비스 함수로 처리됩니다.

## 📋 지원 카테고리

- **교통**: 자동차, 버스, 지하철, 걷기, 자전거
- **의류**: 상의, 하의, 신발, 가방/잡화 (새제품/빈티지 구분)
- **식품** (한국일보 한끼 밥상 탄소 계산기 기준):
  - **밥**: 쌀밥, 잡곡밥, 현미밥, 보리밥, 콩밥, 김밥, 비빔밥(불고기), 비빔밥(산채), 김치볶음밥
  - **면**: 물냉면, 비빔냉면, 잔치국수, 비빔국수, 해물칼국수
  - **국/찌개**: 된장국, 미역국, 콩나물국, 된장찌개, 김치찌개, 순두부찌개, 설렁탕, 갈비탕, 곰탕
  - **반찬**: 배추김치, 깍두기, 총각김치, 열무김치, 숙주나물, 콩나물무침, 시금치나물, 무생채, 소고기장조림, 멸치조림, 콩자반, 깻잎장아찌, 제육볶음, 오징어볶음, 불고기, 잡채, 고등어구이, 달걀프라이, 달걀찜
  - **고기**: 소고기구이, 삼겹살구이
  - **과일**: 딸기, 참외, 수박, 사과, 복숭아, 단감, 포도, 감귤, 키위, 토마토, 방울토마토
  - **패스트푸드**: 피자, 햄버거세트, 후라이드치킨
  - **유제품**: 우유, 치즈, 두유
  - **커피**: 에스프레소, 카페라떼
  - **파스타** (Climatiq API 사용): 카르보나라, 라자냐, 라비올리, 파스타샐러드
- **쓰레기**: 일반, 플라스틱, 종이, 유리, 캔
- **전기**: 냉방기, 난방기
- **물**: 샤워, 설거지, 세탁

## 📊 카테고리별 계산 방법 및 출처

### 계산 우선순위

모든 카테고리는 다음 우선순위로 계산됩니다:

1. **Climatiq API 사용** (API 키가 설정된 경우)
   - 전세계 산업 연관 분석 데이터 (exiobase) 활용
   - Global region 우선 사용 (데이터가 더 많음)
   - 실패 시 로컬 배출 계수로 자동 전환

2. **로컬 배출 계수 사용** (Fallback)
   - API 키가 없거나 API 호출 실패 시
   - 검증된 IPCC 데이터 및 한국일보 한끼 밥상 탄소 계산기 기반 배출 계수 사용

---

### 1. 교통 🚗

**입력 단위**: 분 또는 km

**계산 방법**:
- **API 사용**: Climatiq API 사용
  - **Activity ID**: 
    - 자동차: `passenger_vehicle-vehicle_type_car-fuel_source_na-distance_na-engine_size_na` (Global)
    - 버스: `passenger_vehicle-vehicle_type_bus-fuel_source_na-distance_na-engine_size_na` (Global)
    - 지하철: `passenger_vehicle-vehicle_type_train-fuel_source_electricity-distance_na-engine_size_na` (Global)
  - **데이터 소스**: exiobase (전세계 산업 연관 분석 데이터)
  - **Region**: Global (데이터가 더 많음)
- **Fallback**: 로컬 배출 계수 사용
  - **출처**: IPCC (Intergovernmental Panel on Climate Change) 데이터 기반
  - **계산 방식**: 거리(km) × 배출계수

**계산 방식**:
- **분 단위 입력**: 시간을 거리로 변환 후 배출계수 적용
  - 자동차: 30 km/h (도심 평균) × 시간 → km 변환
  - 버스: 25 km/h × 시간 → km 변환
  - 지하철: 30 km/h × 시간 → km 변환
  - 걷기/자전거: 0 kgCO₂e (탄소 배출 없음)

**배출계수** (kgCO₂e/km):
- 자동차: 0.171 (API 실패 시)
- 버스: 0.089 (API 실패 시)
- 지하철: 0.014 (API 실패 시)
- 걷기/자전거: 0.0

**예시**: 자동차로 30분 이동 = 15km × 0.171 = **2.565 kgCO₂e**

---

### 2. 의류 👕

**입력 단위**: 개

**계산 방법**:
- **API 사용**: Climatiq API 사용
  - **Activity ID**:
    - 상의(티셔츠): `consumer_goods-type_cotton_t_shirt` (CN, 2022)
    - 하의(청바지): `consumer_goods-type_cotton_clothing` (CN, 2022)
    - 신발: `consumer_goods-type_footwear` (Global)
    - 가방/잡화: `consumer_goods-type_cotton_clothing` (CN, 2022) - 면 의류 평균으로 근사
  - **데이터 소스**: exiobase
  - **계산 방식**: 개수 × 평균 무게(kg) → API 호출
    - 상의: 0.2 kg/개
    - 하의: 0.6 kg/개
    - 신발: 0.9 kg/개
    - 가방/잡화: 0.5 kg/개
- **Fallback**: 로컬 배출 계수 사용
  - **출처**: IPCC 및 산업 평균 데이터 기반
  - **계산 방식**: 개수 × 배출계수 (새제품/빈티지 구분)
  - 빈티지 의류는 새제품의 10% 배출량 (재사용 효과 반영)

**배출계수** (kgCO₂e/개, Fallback):
- 티셔츠 (새제품): 2.0 | (빈티지): 0.2
- 청바지 (새제품): 33.4 | (빈티지): 3.34
- 신발 (새제품): 13.6 | (빈티지): 1.36
- 가방/잡화 (새제품): 2.0 | (빈티지): 0.2

**예시**: 새 청바지 1개 구매 = 1 × 33.4 = **33.4 kgCO₂e**

---

### 3. 식품 🍖

**입력 단위**: 회 (한끼 기준)

**계산 방법**:
- **API 사용**: 파스타 항목만 Climatiq API 사용
  - **Activity ID**:
    - 카르보나라: `food-type_carbonara_style_pasta_spaghetti_tagliatelle` (FR)
    - 라자냐: `food-type_lasagna_or_cannelloni_with_vegetables` (FR)
    - 라비올리: `food-type_ravioli_filled_with_vegetables_in_tomato_sauce_canned` (FR)
    - 파스타샐러드: `food-type_prepared_pasta_salad_with_vegetable_meat_or_fish` (FR)
  - **계산 방식**: 1회를 약 0.25kg (250g)로 변환하여 API 호출
  - **데이터 소스**: exiobase
- **로컬 계산**: 나머지 모든 식품 항목
  - **출처**: 한국일보 한끼 밥상 탄소 계산기
  - **계산 방식**: 한끼 수 × 한끼당 배출 계수 (kgCO₂e/한끼)
  - **기준**: 완성된 한끼 식사 기준 배출량

#### 한끼 기준 항목 (한국일보 한끼 밥상 탄소 계산기 출처)

**출처**: 한국일보 한끼 밥상 탄소 계산기  
**단위**: 한끼 (회)  
**계산 방식**: 한끼 수 × 한끼당 배출 계수 (kgCO₂e/한끼)

**밥**  (한국일보 기준만)
- 쌀밥: 0.5 kgCO₂e/한끼
- 잡곡밥: 1.1 kgCO₂e/한끼
- 현미밥: 0.2 kgCO₂e/한끼
- 보리밥: 0.1 kgCO₂e/한끼
- 콩밥: 0.1 kgCO₂e/한끼
- 김밥: 0.4 kgCO₂e/한끼
- 비빔밥(불고기): 1.4 kgCO₂e/한끼
- 비빔밥(산채): 0.7 kgCO₂e/한끼
- 김치볶음밥: 0.4 kgCO₂e/한끼

**면**  (한국일보 기준만)
- 물냉면: 2.4 kgCO₂e/한끼
- 비빔냉면: 1.1 kgCO₂e/한끼
- 잔치국수: 1.8 kgCO₂e/한끼
- 비빔국수: 1.3 kgCO₂e/한끼
- 해물칼국수: 0.4 kgCO₂e/한끼

**국/탕/찌개** (한국일보 기준만)
- 된장국: 0.9 kgCO₂e/한끼
- 미역국: 2.6 kgCO₂e/한끼
- 콩나물국: 0.5 kgCO₂e/한끼
- 된장찌개: 1.5 kgCO₂e/한끼
- 김치찌개: 2.3 kgCO₂e/한끼
- 순두부찌개: 0.7 kgCO₂e/한끼
- 설렁탕: 10.0 kgCO₂e/한끼
- 갈비탕: 5.0 kgCO₂e/한끼
- 곰탕: 9.7 kgCO₂e/한끼

**반찬**  (한국일보 기준만)
- 배추김치: 0.3 kgCO₂e/한끼
- 깍두기: 0.3 kgCO₂e/한끼
- 총각김치: 0.1 kgCO₂e/한끼
- 열무김치: 0.2 kgCO₂e/한끼
- 숙주나물: 0.1 kgCO₂e/한끼
- 콩나물무침: 0.2 kgCO₂e/한끼
- 시금치나물: 0.5 kgCO₂e/한끼
- 무생채: 0.0 kgCO₂e/한끼
- 소고기장조림: 5.5 kgCO₂e/한끼
- 멸치조림: 0.1 kgCO₂e/한끼
- 콩자반: 0.7 kgCO₂e/한끼
- 깻잎장아찌: 0.1 kgCO₂e/한끼
- 제육볶음: 1.9 kgCO₂e/한끼
- 오징어볶음: 0.6 kgCO₂e/한끼
- 불고기: 13.9 kgCO₂e/한끼
- 잡채: 0.6 kgCO₂e/한끼
- 고등어구이: 0.3 kgCO₂e/한끼
- 달걀프라이: 0.1 kgCO₂e/한끼
- 달걀찜: 0.2 kgCO₂e/한끼

**고기**  (한국일보 기준만)
- 소고기구이: 7.7 kgCO₂e/한끼
- 삼겹살구이: 2.0 kgCO₂e/한끼

**과일**  (한국일보 기준만)
- 딸기: 0.1 kgCO₂e/한끼
- 참외: 0.1 kgCO₂e/한끼
- 수박: 0.1 kgCO₂e/한끼
- 사과: 0.1 kgCO₂e/한끼
- 복숭아: 0.1 kgCO₂e/한끼
- 단감: 0.0 kgCO₂e/한끼 (일주일 먹으면 0.2 kgCO₂e)
- 포도: 0.0 kgCO₂e/한끼 (일주일 먹으면 0.3 kgCO₂e)
- 감귤: 0.0 kgCO₂e/한끼 (일주일 먹으면 0.2 kgCO₂e)
- 키위: 0.0 kgCO₂e/한끼 (일주일 먹으면 0.2 kgCO₂e)
- 토마토: 0.1 kgCO₂e/한끼
- 방울토마토: 0.2 kgCO₂e/한끼

**패스트푸드** (한국일보 기준만)
- 피자한국: 2.0 kgCO₂e/한끼
- 햄버거세트: 3.7 kgCO₂e/한끼
- 후라이드치킨: 2.1 kgCO₂e/한끼

**유제품**  (한국일보 기준만)
- 우유: 1.2 kgCO₂e/한끼
- 치즈: 11.3 kgCO₂e/한끼
- 두유: 0.3 kgCO₂e/한끼

**커피** (한국일보 기준만)
- 에스프레소: 0.3 kgCO₂e/한끼
- 카페라떼한국: 0.6 kgCO₂e/한끼

**파스타** (Climatiq API 사용)
- 카르보나라: `food-type_carbonara_style_pasta_spaghetti_tagliatelle` (FR)
- 라자냐: `food-type_lasagna_or_cannelloni_with_vegetables` (FR)
- 라비올리: `food-type_ravioli_filled_with_vegetables_in_tomato_sauce_canned` (FR)
- 파스타샐러드: `food-type_prepared_pasta_salad_with_vegetable_meat_or_fish` (FR)
- **계산 방식**: 1회를 약 0.25kg (250g)로 변환하여 API 호출
- **데이터 소스**: exiobase

**예시**: 김밥 2회 = 2회 × 0.4 = **0.8 kgCO₂e**  
**예시**: 물냉면 1회 = 1회 × 2.4 = **2.4 kgCO₂e**  
**예시**: 카르보나라 파스타 1회 = 0.25kg × API 배출계수 (약 **0.9 kgCO₂e**)

---

### 4. 쓰레기 🗑️

**입력 단위**: kg 또는 개

**계산 기준**:
- **API 사용**: Climatiq API의 쓰레기 처리 배출 계수
- **Fallback**: 로컬 배출 계수 사용

**계산 방식**:
- kg 단위: 직접 배출계수 적용
- 개 단위: 개수 → 무게 변환 후 배출계수 적용
  - 캔: 0.015 kg/개
  - 병: 0.4 kg/개

**배출계수** (kgCO₂e/kg):
- 일반 쓰레기: 0.5 (매립)
- 플라스틱: 2.5
- 종이: 0.3
- 유리: 0.2
- 캔: 1.5

**예시**: 플라스틱 1kg = 1 × 2.5 = **2.5 kgCO₂e**

---

### 5. 전기 ⚡

**입력 단위**: 시간

**계산 기준**:
- **API 사용**: Climatiq API의 전력 배출 계수 (한국 전력망 기준)
- **Fallback**: 한국 전력 배출 계수 사용

**계산 방식**:
- 시간 × 기기별 소비전력 → kWh 변환 후 배출계수 적용
- 냉방기: 2.0 kW
- 난방기: 1.5 kW

**배출계수**: 0.424 kgCO₂e/kWh (한국 전력 배출계수)

**예시**: 에어컨 2시간 사용 = 4 kWh × 0.424 = **1.696 kgCO₂e**

---

### 6. 물 💧

**입력 단위**: 회 또는 분 (샤워만)

**계산 기준**:
- **API 사용**: Climatiq API의 상수도 처리 배출 계수
- **Fallback**: 로컬 배출 계수 사용

**계산 방식**:
- 회 단위: 횟수 × 평균 사용량 → L 변환 후 배출계수 적용
  - 샤워: 70 L/회
  - 설거지: 15 L/회
  - 세탁: 60 L/회
- 분 단위 (샤워): 분 × 10 L/분 → L 변환

**배출계수**: 0.0003 kgCO₂e/L (상수도 처리)

**예시**: 샤워 1회 = 70 L × 0.0003 = **0.021 kgCO₂e**

---

## 📐 단위 변환 규칙

### 교통
- **분 → km**: 시간(시간) × 평균 속도(km/h)
  - 자동차: 30 km/h (도심 평균)
  - 버스: 25 km/h
  - 지하철: 30 km/h

### 식품
- **회 단위**: 한끼 기준 배출 계수 직접 적용 (변환 없음)
  - 파스타만: 1회 = 0.25kg (250g)로 변환하여 API 호출

### 쓰레기
- **개 → kg**: 개수 × 개당 무게(kg)
  - 캔: 0.015 kg/개
  - 병: 0.4 kg/개

### 전기
- **시간 → kWh**: 시간 × 기기 소비전력(kW)
  - 냉방기: 2.0 kW (에어컨 평균)
  - 난방기: 1.5 kW (히터 평균)

### 물
- **회 → L**: 회수 × 평균 사용량(L/회)
  - 샤워: 70 L/회 (평균 5-10분, 평균 7분 × 10L/분)
  - 설거지: 15 L/회 (평균 10-20L/회)
  - 세탁: 60 L/회 (평균 50-70L/회, 일반 세탁기 기준)
- **분 → L** (샤워만): 분 × 10 L/분

---

## 📚 데이터 출처 및 참고 자료

### Climatiq API
- **공식 사이트**: https://www.climatiq.io/
- **데이터 소스**: exiobase (전세계 산업 연관 분석 데이터)
- **활용 범위**: 교통, 의류, 쓰레기, 전기, 물, 파스타(식품 일부)
- **특징**: 
  - Global region 우선 사용 (데이터가 더 많음)
  - 국가별 데이터도 제공 (CN, FR, DE, AU, US-MI 등)
  - API 키가 없어도 Fallback 배출 계수로 계산 가능

### 한국일보 한끼 밥상 탄소 계산기
- **출처**: 한국일보 한끼 밥상 탄소 계산기
- **활용 범위**: 식품 카테고리 대부분 (파스타 제외)
- **기준**: 완성된 한끼 식사 기준 배출량 (kgCO₂e/한끼)
- **특징**: 
  - 한국인의 실제 식사 패턴을 반영
  - 한끼 기준으로 직관적인 계산 가능

### IPCC (Intergovernmental Panel on Climate Change)
- **활용 범위**: 교통, 의류, 쓰레기, 물 Fallback 배출 계수
- **특징**: 국제적으로 검증된 기후변화 데이터

### 한국에너지공단
- **활용 범위**: 전기 Fallback 배출 계수
- **배출계수**: 0.478 kgCO₂e/kWh (한국 평균, 2023 기준)

---

## 🔍 계산 방법 요약

| 카테고리 | API 사용 | 로컬 계산 | 주요 출처 |
|---------|---------|---------|----------|
| 교통 | ✅ | ✅ (Fallback) | Climatiq API (exiobase) / IPCC |
| 의류 | ✅ | ✅ (Fallback) | Climatiq API (exiobase) / IPCC |
| 식품 | ✅ (파스타만) | ✅ (나머지) | Climatiq API (파스타) / 한국일보 한끼 밥상 탄소 계산기 |
| 쓰레기 | ✅ | ✅ (Fallback) | Climatiq API (exiobase) / IPCC |
| 전기 | ✅ | ✅ (Fallback) | Climatiq API (exiobase) / 한국에너지공단 |
| 물 | ✅ | ✅ (Fallback) | Climatiq API (exiobase) / IPCC |

---

## 🤖 AI 분석 기준

AI 코칭은 Google Gemini API를 사용하여 사용자의 탄소 배출 패턴을 분석하고 맞춤형 제안을 제공합니다.

### 분석 데이터

1. **총 탄소 배출량**: 오늘 하루 총 배출량 (kgCO₂e)
2. **카테고리별 배출량**: 각 카테고리(교통, 식품, 전기 등)별 배출량
3. **최근 활동 내역**: 최근 10개 활동의 상세 정보
4. **한국인 평균 비교**: 한국인 평균 일일 배출량과 비교

### 한국인 평균 일일 배출량 (kgCO₂e)

**출처**: 지표누리 온실가스 총배출량과 GDP 대비 1인당 배출량 (2012-2022년 데이터 평균값)

- **전체 평균**: **14.5 kgCO₂e/일**

> **참고**: 
> - 위 값은 지표누리(www.index.go.kr)의 온실가스 총배출량과 GDP 대비 1인당 배출량 데이터를 기반으로 2012-2022년 평균값으로 계산된 값입니다.
> - 실제 개인별 배출량은 생활 방식에 따라 크게 달라질 수 있습니다.
> - 카테고리별 평균 배출량은 참고용 추정값이며, 총 평균과의 비교만 사용됩니다.

### AI 분석 프로세스

1. **패턴 분석**: 사용자의 배출 패턴을 2-3문장으로 요약
2. **구체적 제안**: 실천 가능한 탄소 저감 제안 3가지 제시
   - 각 제안에 "소나무 X그루를 심는 효과" 같은 감성적 비유 포함
3. **대안 행동**: 실제 사용한 활동에 대한 구체적 대안 제시
   - 예: 자동차 이용 → 대중교통 이용 (50% 감소)
   - 예: 육류 섭취 → 채식 위주 식단 (70% 감소)
4. **격려 메시지**: 감성적이고 동기부여가 되는 메시지 제공

### AI 분석 예시

**입력 데이터**:
- 총 배출량: 12.5 kgCO₂e
- 교통: 자동차 30분 (2.565 kgCO₂e)
- 식품: 소고기 1회 식사 (5.4 kgCO₂e)

**AI 분석 결과**:
- **분석**: 평균보다 약 25% 높은 배출량입니다. 특히 교통과 식품 분야에서 개선의 여지가 있습니다.
- **제안1**: 대중교통 이용으로 교통 배출량을 50% 줄일 수 있어요 (소나무 3그루 심기 효과)
- **제안2**: 채식 위주 식단으로 식품 배출량을 70% 감소시킬 수 있어요 (소나무 5그루 심기 효과)
- **제안3**: 물과 전기 사용을 10% 줄이면 추가 감소 효과가 있어요
- **격려 메시지**: 작은 변화가 큰 차이를 만듭니다! 함께 지구를 지켜요 🌱

---

## 💰 포인트 지급 기준

EcoJourney는 환경 친화적 활동에 대해 포인트를 지급합니다. 포인트는 데이터 저장 시 자동으로 계산되어 지급됩니다.

### 포인트 지급 항목

#### 1. 절약량 포인트 (자전거/걷기 사용)
- **기준**: 자전거 또는 걷기를 사용한 경우
- **계산 방식**: 절약한 탄소 배출량(kg) × 100원/kg = 포인트
- **예시**: 
  - 자전거 5km 사용 → 약 0.445kg 절약 → 약 **44점**
  - 걷기 3km 사용 → 약 0.267kg 절약 → 약 **27점**

#### 2. 빈티지 제품 포인트
- **기준**: 빈티지(중고) 의류 제품 구매 시
- **계산 방식**: 빈티지 제품 1개당 **10점**
- **예시**: 
  - 빈티지 상의 2개 구매 → **20점**
  - 빈티지 신발 1개 구매 → **10점**

#### 3. 평균 대비 낮은 배출량 포인트
- **기준**: 일일 총 배출량이 한국인 평균(14.5 kgCO₂e/일)보다 낮은 경우
- **계산 방식**: (평균 배출량 - 내 배출량) × 20점/kg (최대 100점)
- **예시**: 
  - 총 배출량 10kg (평균보다 4.5kg 낮음) → 4.5kg × 20점 = **90점**
  - 총 배출량 8kg (평균보다 6.5kg 낮음) → 6.5kg × 20점 = **100점** (최대치)

### 포인트 지급 예시

**시나리오**: 
- 자전거 5km 사용 (절약량: 0.445kg)
- 빈티지 상의 1개 구매
- 총 배출량: 10kg (평균 14.5kg보다 4.5kg 낮음)

**포인트 계산**:
- 절약량 포인트: 0.445kg × 100원 = **44점**
- 빈티지 제품 포인트: 1개 × 10점 = **10점**
- 평균 대비 낮은 배출량 포인트: 4.5kg × 20점 = **90점**
- **총 포인트: 144점**

### 포인트 사용

- **단과대 대항전**: 포인트를 베팅하여 승리 시 상대방 포인트 획득
- **BeCome 마일리지 환산**: 앱 포인트를 학교 공식 마일리지로 교환 신청 가능
- **챌린지 완료 보상**: 주간 챌린지 미션 완료 시 추가 포인트 획득

### 참고 사항

- 포인트는 **새로운 기록을 저장할 때만** 지급됩니다 (같은 날짜에 재저장 시 포인트 지급 안 됨)
- 포인트 획득 내역은 마이페이지에서 확인할 수 있습니다
- 절약량 포인트는 자전거/걷기 사용 시에만 지급됩니다

---

## 🛠️ 기술 스택

### Full-stack 프레임워크
- **Reflex 0.8.20**: Python 기반 React 프레임워크 (프론트엔드 + 백엔드 통합)
  - 프론트엔드: React 기반 UI
  - 백엔드: Python 서비스 로직 (FastAPI 스타일)

### 외부 API
- **Google Gemini API**: AI 코칭 기능

### 주요 특징
- **Full-stack 통합**: 별도의 백엔드 서버 없이 하나의 앱으로 실행
- **State 관리**: `rx.State` 클래스를 통한 전역 상태 관리
- **이벤트 핸들러**: `on_click`, `on_change` 등을 통한 인터랙티브 UI
- **페이지 라우팅**: `rx.redirect()`를 통한 페이지 네비게이션

## 🎯 차별점

| 비교 항목 | 기존 공공/지자체 앱<br/>(탄소중립포인트, 에코마일리지) | 기존 민간/글로벌 앱<br/>(AWorld, Forest, 챌린저스) | **EcoJourney** |
|---------|---------|---------|---------|
| **동기 부여** | 의무감/절약<br/>(공과금 절약, 포인트 적립) | 자기만족/습관<br/>(나무 심기, 인증샷 남기기) | 🔥 **승부욕/도박성(재미)**<br/>(포인트 베팅, 단과대 대항전 승리) |
| **시각화** | 수치 중심 (딱딱함)<br/>(그래프, 숫자 나열) | 세련된 UI (정적)<br/>(일러스트, 나무 성장) | ❤️ **감성적 인터랙션 (동적)**<br/>(나의 행동에 따라 아파하거나 웃는 지구 아바타) |
| **참여 방식** | 개인 플레이<br/>(나 혼자 에너지 절약) | 느슨한 커뮤니티<br/>(다른 사람 인증 구경하기) | 🤝 **팀 플레이 (Co-opetition)**<br/>(우리 단과대의 승리를 위해 친구 영입) |
| **보상 체계** | 느린 보상<br/>(몇 달 뒤 현금/포인트 지급) | 가상 보상<br/>(앱 내 레벨업, 뱃지) | 💰 **즉각적 현실 보상**<br/>(승자 독식 포인트 → 학교 마일리지 즉시 환전) |
| **분석 기능** | 단순 통계<br/>(지난달 대비 사용량 비교) | 기능 없음<br/>(단순 기록 저장) | 🤖 **AI 컨설턴트**<br/>(구체적 행동 제안 및 탄소 저감 시뮬레이션) |

## 📈 기대 효과

### 자발적 바이럴 마케팅
단과대 대항전 승리를 위해 학생들이 서로 앱 설치와 입력을 독려하며 자연스럽게 사용자 확대.

### 환경 데이터 구축
학번 기반의 실명 데이터를 통해 대학생들의 탄소 배출 패턴과 환경 의식 수준에 대한 신뢰도 높은 데이터베이스 확보.

### 행동 변화 유도
아바타의 변화와 AI의 구체적 조언, 그리고 7일 챌린지를 통해 일회성이 아닌 습관적인 친환경 라이프스타일 정착.

## 📚 추가 문서

- **빠른 시작**: [QUICKSTART.md](./QUICKSTART.md)
- **Reflex 설정 가이드**: [ecojourney/REFLEX_SETUP.md](./ecojourney/REFLEX_SETUP.md)

## 🤝 기여하기

이슈나 개선 사항이 있으면 언제든지 제안해주세요!

## 📄 라이선스

이 프로젝트는 교육 및 개인 프로젝트 목적으로 제작되었습니다.

---

🌱 **작은 실천이 큰 변화를 만듭니다** 🌍
